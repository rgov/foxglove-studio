env:
  browser: true
  es6: true
  node: true

ignorePatterns:
  - dist
  - "packages/**/wasm/*.js"
  - "!.storybook"
  - storybook-static
  # This file triggers an eslint bug because of our {fs: false} setting in webpack config.
  # But for some reason it only happens locally, not in CI.
  - packages/studio-base/src/test/transformers/rawImportPreprocessor.ts

plugins:
  - react
  - react-hooks
  - "@typescript-eslint"
  - file-progress

extends:
  - eslint:recommended
  - plugin:react/recommended
  - plugin:@typescript-eslint/eslint-recommended
  - plugin:@typescript-eslint/recommended
  - plugin:@typescript-eslint/recommended-requiring-type-checking
  - plugin:import/errors
  - plugin:import/warnings
  - plugin:import/typescript

parser: "@typescript-eslint/parser"
parserOptions:
  ecmaVersion: 2020
  sourceType: module
  project: ./**/tsconfig.json

settings:
  react:
    version: detect
  import/internal-regex: "^@foxglove"

rules:
  file-progress/activate: 1
  id-denylist:
    - error
    - useEffectOnce
    - window # don't allow redefining window
  no-console: off # configured in no-restricted-syntax
  "@typescript-eslint/ban-ts-comment":
    - error
    # TODO: remove once we fix all TS issues
    - ts-expect-error: allow-with-description
      ts-ignore: true
      ts-nocheck: false
      ts-check: true
  # It's sometimes useful to explicitly name to guard against future changes
  "@typescript-eslint/no-inferrable-types": off
  "@typescript-eslint/no-empty-function": off
  "@typescript-eslint/no-implied-eval": off

  # These could theoretically be turned on (or merit investigation) but are currently noisy
  "@typescript-eslint/no-misused-promises": off
  "@typescript-eslint/no-floating-promises": off
  "@typescript-eslint/restrict-template-expressions": off
  "@typescript-eslint/no-unsafe-member-access": off
  "@typescript-eslint/no-unsafe-return": off
  "@typescript-eslint/no-unsafe-assignment": off
  "@typescript-eslint/no-unsafe-call": off
  "@typescript-eslint/require-await": off
  "@typescript-eslint/prefer-regexp-exec": off
  "@typescript-eslint/no-unnecessary-condition": off # similar to strict-boolean-expressions, but catches more (noisy) cases?

  "@typescript-eslint/no-explicit-any": error
  "@typescript-eslint/prefer-nullish-coalescing": error
  "@typescript-eslint/no-non-null-assertion": error
  "@typescript-eslint/no-confusing-non-null-assertion": error
  "@typescript-eslint/no-unnecessary-boolean-literal-compare": error
  "@typescript-eslint/prefer-includes": error
  "@typescript-eslint/prefer-optional-chain": error
  "@typescript-eslint/restrict-plus-operands": [error, { checkCompoundAssignments: true }]
  "@typescript-eslint/switch-exhaustiveness-check": error
  "@typescript-eslint/unbound-method": [error, { ignoreStatic: true }]
  "@typescript-eslint/explicit-module-boundary-types": error
  react/jsx-uses-react: off
  react/react-in-jsx-scope: off
  react/prop-types: off # Unnecessary with typescript validation
  react/no-unused-prop-types: error
  react-hooks/rules-of-hooks: error
  react-hooks/exhaustive-deps:
    - error
    - additionalHooks: "(useAsync(?!AppConfigurationValue))"
  no-new-func: error
  foxglove-license-header: error

  curly: error
  "@typescript-eslint/no-unused-vars":
    - error
    - { vars: all, args: after-used, varsIgnorePattern: "^_", argsIgnorePattern: "^_" }
  no-underscore-dangle:
    - error
    - allowAfterThis: true
  no-warning-comments:
    - error
    - terms: ["fixme", "xxx"]
      location: anywhere
  # Some good ones that people really should be adding to import/recommended:
  import/first: error
  import/no-useless-path-segments: error
  import/no-mutable-exports: error
  import/newline-after-import: error
  # Group imports into three groups [external, @foxglove, relative] and sort alphabetically within each group
  import/order:
    - error
    - alphabetize: { order: asc }
      newlines-between: always
      groups: [[builtin, external], [internal], [parent, sibling, index]]

  # we let typescript and webpack handle whether imports exist or not
  import/namespace: off
  import/default: off
  import/no-named-as-default: off
  import/no-named-as-default-member: off
  import/no-unresolved: off

  prefer-arrow-callback:
    - error
    - allowNamedFunctions: true
  "@typescript-eslint/no-shadow": error
  no-restricted-imports:
    - error
    - paths:
        - name: lodash
          importNames: [get]
          message: "Use optional chaining instead of lodash.get."
        - name: lodash/get
          message: "Use optional chaining instead of lodash.get."
  no-restricted-syntax:
    - error
    - selector: "MethodDefinition[kind='get'], Property[kind='get']"
      message: "Property getters are not allowed; prefer function syntax instead."
    - selector: "MethodDefinition[kind='set'], Property[kind='set']"
      message: "Property setters are not allowed; prefer function syntax instead."
    # We disable console methods here rather than using no-console so that it doesn't prohibit overrides such as "console.info = ..."
    - selector: "CallExpression[callee.object.name='console'][callee.property.name!=/^(warn|error|debug|assert)$/]"
      message: "Unexpected property on console object was called"

    # Ban `null [!=]= x` and `x [!=]= null`
    - selector: "BinaryExpression:matches([operator='=='], [operator='!=']):matches([left.type=Literal][left.raw=null], [right.type=Literal][right.raw=null])"
      message: 'Prefer "x == undefined" or "x != undefined" to check for both null and undefined.'
    # Ban `undefined [!=]= x`
    - selector: "BinaryExpression:matches([operator='=='], [operator='!='])[left.type=Identifier][left.name=undefined]"
      message: 'Prefer "x == undefined" or "x != undefined" to check for both null and undefined.'
    # Ban `==` and `!=` unless RHS is undefined
    - selector: "BinaryExpression:matches([operator='=='], [operator='!=']):not([right.type=Identifier][right.name=undefined]):not([right.type=Literal][right.raw=null])"
      message: 'Use strict equality operators "===" and "!==", except when checking for null or undefined.'

    - selector: "TSNullKeyword, Literal[raw=null]"
      message: >
        Prefer undefined instead of null. When required for React refs/components, use
        the `ReactNull` alias. Otherwise, if strictly necessary, disable this error with
        `// eslint-disable-next-line no-restricted-syntax`. For rationale, see:
        https://github.com/sindresorhus/meta/discussions/7"

    - selector: "TSPrivateIdentifier"
      message: "Use private instead of #"

  "@typescript-eslint/strict-boolean-expressions":
    - error
      # Force explicit checks that strings are empty
    - allowString: false
      # Force explicit checks that numbers are != 0 or NaN
      allowNumber: false
      # Keeps the error count manageable while we enhance type information from the flow conversion
      allowAny: true

overrides:
  - rules:
      "@typescript-eslint/no-explicit-any": warn
    files:
      - "packages/studio-base/src/components/Autocomplete.stories.tsx"
      - "packages/studio-base/src/components/Autocomplete.tsx"
      - "packages/studio-base/src/components/ButtonBase.tsx"
      - "packages/studio-base/src/components/Chart/index.stories.tsx"
      - "packages/studio-base/src/components/Chart/index.tsx"
      - "packages/studio-base/src/components/Chart/worker/ChartJSManager.ts"
      - "packages/studio-base/src/components/Chart/worker/ChartJsMux.ts"
      - "packages/studio-base/src/components/ChildToggle/index.tsx"
      - "packages/studio-base/src/components/DocumentDropListener.test.tsx"
      - "packages/studio-base/src/components/Dropdown/index.tsx"
      - "packages/studio-base/src/components/ErrorBoundary.tsx"
      - "packages/studio-base/src/components/ExpandingToolbar.tsx"
      - "packages/studio-base/src/components/Flex.tsx"
      - "packages/studio-base/src/components/GlobalKeyListener.test.tsx"
      - "packages/studio-base/src/components/GlobalKeyListener.ts"
      - "packages/studio-base/src/components/GlobalVariablesTable/index.tsx"
      - "packages/studio-base/src/components/GradientPicker.stories.tsx"
      - "packages/studio-base/src/components/GradientPicker.tsx"
      - "packages/studio-base/src/components/Icon.tsx"
      - "packages/studio-base/src/components/JsonTree/useGetItemStringWithTimezone.tsx"
      - "packages/studio-base/src/components/KeyListener.tsx"
      - "packages/studio-base/src/components/Menu/Menu.tsx"
      - "packages/studio-base/src/components/Menu/SubMenu.tsx"
      - "packages/studio-base/src/components/MessagePathSyntax/MessagePathInput.stories.tsx"
      - "packages/studio-base/src/components/MessagePathSyntax/MessagePathInput.tsx"
      - "packages/studio-base/src/components/MessagePathSyntax/messagePathsForDatatype.test.ts"
      - "packages/studio-base/src/components/MessagePathSyntax/messagePathsForDatatype.ts"
      - "packages/studio-base/src/components/MessagePathSyntax/useCachedGetMessagePathDataItems.test.tsx"
      - "packages/studio-base/src/components/MessagePathSyntax/useCachedGetMessagePathDataItems.ts"
      - "packages/studio-base/src/components/MessagePipeline/MockMessagePipelineProvider.tsx"
      - "packages/studio-base/src/components/MessagePipeline/index.test.tsx"
      - "packages/studio-base/src/components/MessagePipeline/index.tsx"
      - "packages/studio-base/src/components/MessagePipeline/pauseFrameForPromise.test.ts"
      - "packages/studio-base/src/components/MessagePipeline/warnOnOutOfSyncMessages.test.ts"
      - "packages/studio-base/src/components/MockPanelContextProvider.tsx"
      - "packages/studio-base/src/components/NotificationDisplay.stories.tsx"
      - "packages/studio-base/src/components/Panel.tsx"
      - "packages/studio-base/src/components/PanelLayout.stories.tsx"
      - "packages/studio-base/src/components/PanelLayout.tsx"
      - "packages/studio-base/src/components/PanelList/index.stories.tsx"
      - "packages/studio-base/src/components/PanelList/index.tsx"
      - "packages/studio-base/src/components/PanelToolbar/index.stories.tsx"
      - "packages/studio-base/src/components/PanelToolbar/index.tsx"
      - "packages/studio-base/src/components/PlaybackControls/index.stories.tsx"
      - "packages/studio-base/src/components/PlaybackControls/index.tsx"
      - "packages/studio-base/src/components/PlaybackSpeedControls.stories.tsx"
      - "packages/studio-base/src/components/PlaybackSpeedControls.tsx"
      - "packages/studio-base/src/components/SegmentedControl.stories.tsx"
      - "packages/studio-base/src/components/Select/Select.tsx"
      - "packages/studio-base/src/components/Select/index.stories.tsx"
      - "packages/studio-base/src/components/SelectableTimestamp.tsx"
      - "packages/studio-base/src/components/ShareJsonModal.stories.tsx"
      - "packages/studio-base/src/components/ShareJsonModal.test.tsx"
      - "packages/studio-base/src/components/ShareJsonModal.tsx"
      - "packages/studio-base/src/components/Slider.tsx"
      - "packages/studio-base/src/components/SliderWithTicks.tsx"
      - "packages/studio-base/src/components/Sparkline.tsx"
      - "packages/studio-base/src/components/TextField.stories.tsx"
      - "packages/studio-base/src/components/TextField.tsx"
      - "packages/studio-base/src/components/TextHighlight.tsx"
      - "packages/studio-base/src/components/TopicToRenderMenu.stories.tsx"
      - "packages/studio-base/src/components/Tree/Node.ts"
      - "packages/studio-base/src/components/Tree/index.tsx"
      - "packages/studio-base/src/components/ValidatedInput.stories.tsx"
      - "packages/studio-base/src/components/ValidatedInput.tsx"
      - "packages/studio-base/src/context/PanelCatalogContext.ts"
      - "packages/studio-base/src/dataProviders/ApiCheckerDataProvider.test.ts"
      - "packages/studio-base/src/dataProviders/ApiCheckerDataProvider.ts"
      - "packages/studio-base/src/dataProviders/BagDataProvider.test.ts"
      - "packages/studio-base/src/dataProviders/CombinedDataProvider.test.ts"
      - "packages/studio-base/src/dataProviders/CombinedDataProvider.ts"
      - "packages/studio-base/src/dataProviders/ParsedMessageCache.ts"
      - "packages/studio-base/src/dataProviders/RenameDataProvider.test.ts"
      - "packages/studio-base/src/dataProviders/RenameDataProvider.ts"
      - "packages/studio-base/src/dataProviders/RpcDataProvider.ts"
      - "packages/studio-base/src/dataProviders/RpcDataProviderRemote.ts"
      - "packages/studio-base/src/dataProviders/WorkerDataProvider.ts"
      - "packages/studio-base/src/dataProviders/types.ts"
      - "packages/studio-base/src/dataProviders/util.test.ts"
      - "packages/studio-base/src/hooks/useContextSelector.test.tsx"
      - "packages/studio-base/src/hooks/useGlobalVariables.ts"
      - "packages/studio-base/src/hooks/usePanelDrag.tsx"
      - "packages/studio-base/src/panels/GlobalVariableSlider/index.stories.tsx"
      - "packages/studio-base/src/panels/ImageView/ImageCanvas.stories.tsx"
      - "packages/studio-base/src/panels/ImageView/ImageCanvas.tsx"
      - "packages/studio-base/src/panels/ImageView/ImageCanvas.worker.ts"
      - "packages/studio-base/src/panels/ImageView/decodings.ts"
      - "packages/studio-base/src/panels/ImageView/index.tsx"
      - "packages/studio-base/src/panels/ImageView/renderImage.ts"
      - "packages/studio-base/src/panels/ImageView/util.test.ts"
      - "packages/studio-base/src/panels/Internals.stories.tsx"
      - "packages/studio-base/src/panels/Internals.test.tsx"
      - "packages/studio-base/src/panels/NodePlayground/BottomBar/DiagnosticsSection.tsx"
      - "packages/studio-base/src/panels/NodePlayground/BottomBar/LogsSection.tsx"
      - "packages/studio-base/src/panels/NodePlayground/BottomBar/index.tsx"
      - "packages/studio-base/src/panels/NodePlayground/Editor.tsx"
      - "packages/studio-base/src/panels/NodePlayground/Sidebar.tsx"
      - "packages/studio-base/src/panels/NodePlayground/index.stories.tsx"
      - "packages/studio-base/src/panels/NodePlayground/index.tsx"
      - "packages/studio-base/src/panels/PlaybackPerformance/index.tsx"
      - "packages/studio-base/src/panels/Plot/PlotLegend.tsx"
      - "packages/studio-base/src/panels/Plot/index.stories.tsx"
      - "packages/studio-base/src/panels/Plot/index.tsx"
      - "packages/studio-base/src/panels/Plot/transformPlotRange.test.ts"
      - "packages/studio-base/src/panels/Plot/transformPlotRange.ts"
      - "packages/studio-base/src/panels/Publish/buildSampleMessage.test.ts"
      - "packages/studio-base/src/panels/Publish/buildSampleMessage.ts"
      - "packages/studio-base/src/panels/Publish/index.stories.tsx"
      - "packages/studio-base/src/panels/Publish/index.tsx"
      - "packages/studio-base/src/panels/RawMessages/Metadata.tsx"
      - "packages/studio-base/src/panels/RawMessages/getDiff.test.ts"
      - "packages/studio-base/src/panels/RawMessages/getDiff.ts"
      - "packages/studio-base/src/panels/RawMessages/getValueActionForValue.test.ts"
      - "packages/studio-base/src/panels/RawMessages/getValueActionForValue.ts"
      - "packages/studio-base/src/panels/RawMessages/index.stories.tsx"
      - "packages/studio-base/src/panels/RawMessages/index.tsx"
      - "packages/studio-base/src/panels/RawMessages/utils.tsx"
      - "packages/studio-base/src/panels/Rosout/LogList.stories.tsx"
      - "packages/studio-base/src/panels/Rosout/index.stories.tsx"
      - "packages/studio-base/src/panels/SourceInfo/index.tsx"
      - "packages/studio-base/src/panels/Tab/EmptyDropTarget.tsx"
      - "packages/studio-base/src/panels/Tab/ToolbarTab.stories.tsx"
      - "packages/studio-base/src/panels/Tab/ToolbarTab.tsx"
      - "packages/studio-base/src/panels/Tab/index.stories.tsx"
      - "packages/studio-base/src/panels/Tab/index.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/CameraInfo/index.stories.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/CameraInfo/index.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/DebugStats.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/DrawingTools/Polygons.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/FollowTFControl.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/FrameCompatibility.test.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/FrameCompatibility.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/GlobalVariableStyles.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/GridBuilder.stories.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/Interactions/GlobalVariableLink/LinkToGlobalVariable.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/Interactions/GlobalVariableLink/index.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/Interactions/GlobalVariableName.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/Interactions/Interaction.stories.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/Interactions/Interactions.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/Interactions/ObjectDetails.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/Interactions/interactionUtils.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/Interactions/useLinkedGlobalVariables.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/MeasureMarker.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/PanelToolbarMenu.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/PanelToolbarMenu.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/PositionControl.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/ReglLeakChecker.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/SceneBuilder/MessageCollector.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/SceneBuilder/MessageCollector.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/SceneBuilder/index.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/SceneBuilder/index.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/SceneBuilder/types.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/SearchText.test.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/ThreeDimensionalVizContext.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicSettingsEditor/ColorPickerForTopicSettings.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicSettingsEditor/CommonDecaySettings.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicSettingsEditor/CommonPointSettings.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicSettingsEditor/PointCloudSettingsEditor.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicSettingsEditor/PoseSettingsEditor.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicSettingsEditor/index.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicSettingsEditor/types.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/Layout.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/NamespaceMenu.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/TopicSettingsModal.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/TopicTree.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/TopicViewModeSelector.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/TreeNodeRow.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/VisibilityToggle.stories.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/VisibilityToggle.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/renderNamespaceNodes.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/renderStyleExpressionNodes.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/renderTreeNodes.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/renderTreeNodes.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/types.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/useTopicTree.test.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/useTopicTree.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TransformsBuilder.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/World.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/WorldMarkers.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/CarModel/index.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/Cover.stories.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/Cover.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/LaserScans.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/LinedConvexHulls.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/OccupancyGrids.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/decodeMarker.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/decodeMarker.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/index.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/index.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/memoization.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/selection.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/selection.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/types.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PoseMarkers.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/utils/index.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/index.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/logger.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/stories/MarkerStory.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/stories/storyComponents.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/threeDimensionalVizUtils.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/utils/diffModeUtils.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/utils/diffModeUtils.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/utils/drawToolUtils.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/utils/groupingUtils.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/utils/groupingUtils.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/withTransforms.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/withWorldMarkerHighlights.tsx"
      - "packages/studio-base/src/panels/diagnostics/DiagnosticStatus.tsx"
      - "packages/studio-base/src/panels/diagnostics/DiagnosticStatusPanel.tsx"
      - "packages/studio-base/src/panels/diagnostics/DiagnosticSummary.tsx"
      - "packages/studio-base/src/panels/diagnostics/DiagnosticsHistory.ts"
      - "packages/studio-base/src/players/OrderedStampPlayer.test.ts"
      - "packages/studio-base/src/players/RandomAccessPlayer.test.ts"
      - "packages/studio-base/src/players/RandomAccessPlayer.ts"
      - "packages/studio-base/src/players/RosbridgePlayer.test.ts"
      - "packages/studio-base/src/players/RosbridgePlayer.ts"
      - "packages/studio-base/src/players/UserNodePlayer/index.test.ts"
      - "packages/studio-base/src/players/UserNodePlayer/index.ts"
      - "packages/studio-base/src/players/UserNodePlayer/nodeRuntimeWorker/index.ts"
      - "packages/studio-base/src/players/UserNodePlayer/nodeRuntimeWorker/registry.ts"
      - "packages/studio-base/src/players/UserNodePlayer/nodeTransformerWorker/index.ts"
      - "packages/studio-base/src/players/UserNodePlayer/nodeTransformerWorker/typegen.test.ts"
      - "packages/studio-base/src/players/UserNodePlayer/nodeTransformerWorker/typegen.ts"
      - "packages/studio-base/src/players/UserNodePlayer/types.ts"
      - "packages/studio-base/src/players/UserNodePlayer/worker.mock.ts"
      - "packages/studio-base/src/players/automatedRun/performanceMeasuringClient.test.ts"
      - "packages/studio-base/src/players/automatedRun/videoRecordingClient.ts"
      - "packages/studio-base/src/players/types.ts"
      - "packages/studio-base/src/reducers/index.ts"
      - "packages/studio-base/src/reducers/panels.ts"
      - "packages/studio-base/src/reducers/userNodes.ts"
      - "packages/studio-base/src/store/configureStore.testing.ts"
      - "packages/studio-base/src/store/configureStore.ts"
      - "packages/studio-base/src/stories/PanelSetup.tsx"
      - "packages/studio-base/src/stories/helpPages.stories.tsx"
      - "packages/studio-base/src/test/MemoryStorage.ts"
      - "packages/studio-base/src/test/mocks/MockSvg.tsx"
      - "packages/studio-base/src/test/mouseEventsHelper.ts"
      - "packages/studio-base/src/types/Messages.ts"
      - "packages/studio-base/src/types/Scene.ts"
      - "packages/studio-base/src/types/panels.ts"
      - "packages/studio-base/src/util/CachedFilelike.test.ts"
      - "packages/studio-base/src/util/CachedFilelike.ts"
      - "packages/studio-base/src/util/FakeRpc.ts"
      - "packages/studio-base/src/util/Rpc.test.ts"
      - "packages/studio-base/src/util/Rpc.ts"
      - "packages/studio-base/src/util/RpcMainThreadUtils.ts"
      - "packages/studio-base/src/util/errors.ts"
      - "packages/studio-base/src/util/history.ts"
      - "packages/studio-base/src/util/iframeUtils.ts"
      - "packages/studio-base/src/util/layout.ts"
      - "packages/studio-base/src/util/selectors.ts"
      - "packages/studio-base/src/util/signal.ts"
      - "packages/studio-base/src/util/synchronizeMessages.ts"
      - "packages/studio-base/src/util/topicUtils.ts"
      - "packages/studio-base/src/util/validators.ts"
      - "packages/studio-base/src/util/workers.ts"
      - "packages/@types/regl-worldview/index.d.ts"

  - rules:
      "@typescript-eslint/no-non-null-assertion": warn
    files:
      - "packages/studio-base/src/components/Autocomplete.tsx"
      - "packages/studio-base/src/components/Chart/index.stories.tsx"
      - "packages/studio-base/src/components/ExpandingToolbar.tsx"
      - "packages/studio-base/src/components/Flex.tsx"
      - "packages/studio-base/src/components/Icon.tsx"
      - "packages/studio-base/src/components/Menu/Item.tsx"
      - "packages/studio-base/src/components/MessagePathSyntax/MessagePathInput.tsx"
      - "packages/studio-base/src/components/MessagePathSyntax/useLatestMessageDataItem.test.tsx"
      - "packages/studio-base/src/components/MessagePathSyntax/useLatestMessageDataItem.ts"
      - "packages/studio-base/src/components/Panel.tsx"
      - "packages/studio-base/src/components/PanelToolbar/index.tsx"
      - "packages/studio-base/src/components/PlaybackControls/index.stories.tsx"
      - "packages/studio-base/src/components/PlaybackControls/index.tsx"
      - "packages/studio-base/src/components/Select/Option.tsx"
      - "packages/studio-base/src/components/TimeBasedChart/downsample.ts"
      - "packages/studio-base/src/components/TimeBasedChart/index.stories.tsx"
      - "packages/studio-base/src/components/Tree/TreeNode.tsx"
      - "packages/studio-base/src/dataProviders/CombinedDataProvider.test.ts"
      - "packages/studio-base/src/dataProviders/CombinedDataProvider.ts"
      - "packages/studio-base/src/dataProviders/MemoryCacheDataProvider.test.ts"
      - "packages/studio-base/src/dataProviders/MemoryCacheDataProvider.ts"
      - "packages/studio-base/src/dataProviders/RenameDataProvider.test.ts"
      - "packages/studio-base/src/dataProviders/util.test.ts"
      - "packages/studio-base/src/panels/GlobalVariableSlider/index.stories.tsx"
      - "packages/studio-base/src/panels/ImageView/CameraModel.ts"
      - "packages/studio-base/src/panels/ImageView/decodings.ts"
      - "packages/studio-base/src/panels/ImageView/index.tsx"
      - "packages/studio-base/src/panels/ImageView/renderImage.ts"
      - "packages/studio-base/src/panels/PlaybackPerformance/index.stories.tsx"
      - "packages/studio-base/src/panels/Plot/PlotLegend.tsx"
      - "packages/studio-base/src/panels/Plot/transformPlotRange.ts"
      - "packages/studio-base/src/panels/RawMessages/fixture.ts"
      - "packages/studio-base/src/panels/RawMessages/index.stories.tsx"
      - "packages/studio-base/src/panels/RawMessages/index.tsx"
      - "packages/studio-base/src/panels/Rosout/LogList.tsx"
      - "packages/studio-base/src/panels/Rosout/index.stories.tsx"
      - "packages/studio-base/src/panels/StateTransitions/index.stories.tsx"
      - "packages/studio-base/src/panels/Tab/ToolbarTab.tsx"
      - "packages/studio-base/src/panels/Tab/index.stories.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/GlobalVariableStyles.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/Interactions/ObjectDetails.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/PositionControl.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/SceneBuilder/index.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/NodeName.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/TopicTree/TextMiddleTruncate.stories.tsx"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/buffers.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/buffers.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/decodeMarker.test.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/PointClouds/selection.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/commands/utils/index.ts"
      - "packages/studio-base/src/panels/ThreeDimensionalViz/utils/drawToolUtils.ts"
      - "packages/studio-base/src/panels/diagnostics/DiagnosticStatus.tsx"
      - "packages/studio-base/src/panels/diagnostics/DiagnosticSummary.tsx"
      - "packages/studio-base/src/panels/diagnostics/DiagnosticsHistory.test.ts"
      - "packages/studio-base/src/players/UserNodePlayer/nodeTransformerWorker/transformer.test.ts"
      - "packages/studio-base/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/pointClouds.ts"
      - "packages/studio-base/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/readers.ts"
      - "packages/studio-base/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/vectors.ts"
      - "packages/studio-base/src/reducers/panels.test.ts"
      - "packages/studio-base/src/reducers/panels.ts"
      - "packages/studio-base/src/util/Rpc.test.ts"
      - "packages/studio-base/src/util/bags.test.ts"
      - "packages/studio-base/src/util/concatAndTruncate.ts"
      - "packages/studio-base/src/util/layout.test.ts"
      - "packages/studio-base/src/util/layout.ts"
      - "packages/rosmsg-deser/src/BuiltinDeserialize.ts"
